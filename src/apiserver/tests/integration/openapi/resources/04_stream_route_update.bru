meta {
  name: stream_route_update
  type: http
  seq: 25
}

put {
  url: {{scheme}}://{{host}}/api/v1/open/gateways/{{gateway_name}}/resources/stream_routes/{{stream_route_id}}/
}

headers {
  X-BK-API-TOKEN: {{x_bk_api_token}}
  Content-Type: application/json
}

body {
  {
    "name": "test_stream_route-222",
    "config": {
      "name": "test_stream_route-222",
      "remote_addr": "127.0.0.1",
      "server_addr": "127.0.0.1",
      "server_port": 8080,
      "sni": "test.com",
      "protocol": {
          "name": "redis",
          "conf": {}
      },
      "upstream": {
        "type": "roundrobin",
        "nodes": {
          "127.0.0.1:1980": 1
        }
      }
    }
  }
}

assert {
  res.status: eq 204
}
